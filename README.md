# 消息通知模块

后面可以直接引入微服务作为一个模块

目前实现了系统消息推送，和获取消息（还需要优化）



## 思路
如果有消息，就保存到数据库（mongodb）

**实时**

发送到websocket判断是否在线，如果在线了就直接实时发送，然后保存到数据库中，
如果是


主模块创建一个websocket

发送消息保存到数据库的时候，先在主模块判断用户是否在线，如果在线那么就实时推送

如果消息模块有新的消息，那么推送到主模块的websocket发送给用户

## 消息思路

用户登录-> 查询数据库获取未读消息保存到stroage中->如果有新消息发送给用户，那么就通过onmessage发送给用户，然后用户继续更新stroage里面对应的未读消息，然后将消息写入数据库
-> 如果用户读取消息，那么就把storage里面的消息删除，然后数据库更新全部消息都为已读

主页通过storage里面是否有消息来查看是否需要有消息的提示

前端如果有新消息发送给用户，如果用户刚刚好在那个接收消息的界面，那么就直接不用更新对应storage，然后刷新消息全部为已读